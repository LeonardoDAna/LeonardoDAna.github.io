{"version":3,"sources":["webpack:///./src/view/arrayDepth/index.vue?2277","webpack:///./node_modules/.pnpm/registry.npmmirror.com+core-js@3.30.2/node_modules/core-js/modules/es.array.filter.js","webpack:///./src/view/arrayDepth/index.vue?1129","webpack:///./src/utils/utils.js","webpack:///src/view/arrayDepth/index.vue","webpack:///./src/view/arrayDepth/index.vue?a3bc","webpack:///./src/view/arrayDepth/index.vue","webpack:///./node_modules/.pnpm/registry.npmmirror.com+core-js@3.30.2/node_modules/core-js/modules/es.array.find-index.js"],"names":["$","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","model","value","callback","$$v","keyword","expression","on","addNew","ref","menuData","filterNode","allowDrop","allowDrag","handleDragStart","handleDragEnter","handleDragLeave","handleDragOver","handleDragEnd","handleDrop","scopedSlots","_u","key","fn","node","data","_s","label","editShow","remove","dialogTitle","dialogVisible","handleClose","$event","editForm","editFormRules","$set","slot","submitForm","staticRenderFns","matchMax","arr","len","newArr","sort","name","targetItemID","menuName","required","message","trigger","id","fileId","viewToken","children","watch","val","$refs","tree","mounted","deep","getArrayMaxDepth","console","log","methods","indexOf","date","status","append","h","depth","$notify","title","style","concat","newChild","Math","random","push","parent","index","findIndex","d","splice","ev","draggingNode","dropNode","dropType","type","_draggingNode$childre","_dropNode$children","targetNodeHasChild","insertedNodeHasChild","singleNodeDepth","emptyForm","_this","validate","valid","editFn","deleteFn","getMaxDepth","i","Array","isArray","deepArr","getDeep","treeRoot","j","component","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES"],"mappings":"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","file":"js/chunk-397d71f2.6f5638e9.js","sourcesContent":["export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/.pnpm/registry.npmmirror.com+css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_xdjepxz3ebzthb3trwr2tgybci/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/registry.npmmirror.com+postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/.pnpm/registry.npmmirror.com+sass-loader@8.0.2_sass@1.26.8/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_xdjepxz3ebzthb3trwr2tgybci/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=25d6dfee&prod&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row justify-between my-mb-20\"},[_c('el-row',{staticClass:\"height-full flex-other\"},[_c('el-col',{staticClass:\"row align-middle my-mr-10\",attrs:{\"span\":5}},[_c('span',{staticClass:\"flex-shrink\"},[_vm._v(\" 关键字： \")]),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1)],1),_c('div',[_c('el-button',{attrs:{\"type\":\"primary\"}},[_c('i',{staticClass:\"el-icon-search\"}),_c('span',{staticClass:\"my-px-5\"},[_vm._v(\"搜索\")])]),_c('el-button',{attrs:{\"type\":\"primary\"}},[_c('i',{staticClass:\"el-icon-refresh\"}),_c('span',{staticClass:\"my-px-5\"},[_vm._v(\"重置\")])]),_c('el-button',{attrs:{\"type\":\"primary\"}},[_c('i',{staticClass:\"el-icon-download\"}),_c('span',{staticClass:\"my-px-5\"},[_vm._v(\"导出\")])]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.addNew}},[_c('i',{staticClass:\"el-icon-circle-plus-outline\"}),_c('span',{staticClass:\"my-px-5\"},[_vm._v(\"添加\")])])],1)],1),_c('el-divider'),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.menuData,\"node-key\":\"id\",\"default-expand-all\":\"\",\"filter-node-method\":_vm.filterNode,\"draggable\":\"\",\"allow-drop\":_vm.allowDrop,\"allow-drag\":_vm.allowDrag,\"expand-on-click-node\":false},on:{\"node-drag-start\":_vm.handleDragStart,\"node-drag-enter\":_vm.handleDragEnter,\"node-drag-leave\":_vm.handleDragLeave,\"node-drag-over\":_vm.handleDragOver,\"node-drag-end\":_vm.handleDragEnd,\"node-drop\":_vm.handleDrop},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_c('span',[_c('span',{staticClass:\"opeartionBtn fc-editColor\",on:{\"click\":function () { return _vm.editShow(data); }}},[_vm._v(\" 修改 \")]),_c('el-divider',{attrs:{\"direction\":\"vertical\"}}),_c('span',{staticClass:\"opeartionBtn fc-appendColor\",on:{\"click\":function () { return _vm.addNew(data); }}},[_vm._v(\" 新增 \")]),_c('el-divider',{attrs:{\"direction\":\"vertical\"}}),_c('span',{staticClass:\"opeartionBtn fc-deleteColor\",on:{\"click\":function () { return _vm.remove(node, data); }}},[_vm._v(\" 删除 \")])],1)])}}])}),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"菜单名称\",\"prop\":\"menuName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入菜单名称\"},model:{value:(_vm.editForm.menuName),callback:function ($$v) {_vm.$set(_vm.editForm, \"menuName\", $$v)},expression:\"editForm.menuName\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function throttle(fn, delay) {\r\n  let timer\r\n  return function () {\r\n    if (timer) {\r\n      return\r\n    }\r\n    let _this = this,\r\n      argu = arguments\r\n    timer = setTimeout(function () {\r\n      fn.apply(_this, argu)\r\n      timer = null\r\n    }, delay)\r\n  }\r\n}\r\nexport function matchMax(arr) {\r\n  let len = arr.length;\r\n  var newArr = arr.sort();\r\n  return newArr[len - 1];\r\n}\r\n","<template>\r\n  <div>\r\n    <div class=\"row justify-between my-mb-20\">\r\n      <el-row class=\"height-full flex-other\">\r\n        <el-col :span=\"5\" class=\"row align-middle my-mr-10\">\r\n          <span class=\"flex-shrink\"> 关键字： </span>\r\n          <el-input v-model=\"keyword\" placeholder=\"请输入内容\"> </el-input>\r\n        </el-col>\r\n      </el-row>\r\n      <div>\r\n        <el-button type=\"primary\">\r\n          <i class=\"el-icon-search\"></i>\r\n          <span class=\"my-px-5\">搜索</span>\r\n        </el-button>\r\n        <el-button type=\"primary\">\r\n          <i class=\"el-icon-refresh\"></i>\r\n          <span class=\"my-px-5\">重置</span>\r\n        </el-button>\r\n        <el-button type=\"primary\">\r\n          <i class=\"el-icon-download\"></i>\r\n          <span class=\"my-px-5\">导出</span>\r\n        </el-button>\r\n        <el-button type=\"success\" @click=\"addNew\">\r\n          <i class=\"el-icon-circle-plus-outline\"></i>\r\n          <span class=\"my-px-5\">添加</span>\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n    <el-divider></el-divider>\r\n    <el-tree\r\n      ref=\"tree\"\r\n      :data=\"menuData\"\r\n      node-key=\"id\"\r\n      default-expand-all\r\n      :filter-node-method=\"filterNode\"\r\n      @node-drag-start=\"handleDragStart\"\r\n      @node-drag-enter=\"handleDragEnter\"\r\n      @node-drag-leave=\"handleDragLeave\"\r\n      @node-drag-over=\"handleDragOver\"\r\n      @node-drag-end=\"handleDragEnd\"\r\n      @node-drop=\"handleDrop\"\r\n      draggable\r\n      :allow-drop=\"allowDrop\"\r\n      :allow-drag=\"allowDrag\"\r\n      :expand-on-click-node=\"false\"\r\n    >\r\n      <!-- show-checkbox -->\r\n      <!-- :render-content=\"renderContent\" -->\r\n      <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n        <span>{{ node.label }}</span>\r\n        <span>\r\n          <span class=\"opeartionBtn fc-editColor\" @click=\"() => editShow(data)\">\r\n            修改\r\n          </span>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <span class=\"opeartionBtn fc-appendColor\" @click=\"() => addNew(data)\">\r\n            新增\r\n          </span>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <span\r\n            class=\"opeartionBtn fc-deleteColor\"\r\n            @click=\"() => remove(node, data)\"\r\n          >\r\n            删除\r\n          </span>\r\n        </span>\r\n      </span>\r\n    </el-tree>\r\n    <el-dialog\r\n      :title=\"dialogTitle\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"30%\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <el-form\r\n        ref=\"editForm\"\r\n        :model=\"editForm\"\r\n        :rules=\"editFormRules\"\r\n        label-width=\"80px\"\r\n      >\r\n        <el-form-item label=\"菜单名称\" prop=\"menuName\">\r\n          <el-input v-model=\"editForm.menuName\" placeholder=\"请输入菜单名称\">\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { matchMax } from \"@/utils/utils.js\";\r\nexport default {\r\n  name: \"floor\",\r\n  data() {\r\n    return {\r\n      keyword: \"\",\r\n      targetItemID: \"\",\r\n      dialogVisible: false,\r\n      dialogTitle: \"编辑\",\r\n      editForm: {\r\n        menuName: \"\",\r\n      },\r\n      editFormRules: {\r\n        menuName: [\r\n          { required: true, message: \"请输入菜单名称\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      menuData: [\r\n        {\r\n          id: 1,\r\n          label: \"RF空调冷热源设备\",\r\n          fileId: \"10000713243357\",\r\n          viewToken: \"6885ff29b3464f06931c73c68cb0494d\",\r\n          children: [],\r\n        },\r\n        {\r\n          id: 2,\r\n          label: \"RF排风热回收型新风机组\",\r\n          children: [],\r\n        },\r\n        {\r\n          id: 3,\r\n          label: \"4F办公区域\",\r\n          children: [\r\n            {\r\n              id: 4,\r\n              label: \"4F建筑模型\",\r\n              children: [],\r\n              fileId: \"10000713242231\",\r\n              viewToken: \"4c079ddafe5b46b7922490fffc1792d9\",\r\n            },\r\n            {\r\n              id: 5,\r\n              fileId: \"10000713237848\",\r\n              children: [],\r\n              viewToken: \"fcf12606ba534c0fb3d8c3be65cabbe3\",\r\n              label: \"4F空调系统\",\r\n            },\r\n            {\r\n              id: 6,\r\n              label: \"4F配电系统\",\r\n              children: [],\r\n            },\r\n            {\r\n              id: 7,\r\n              label: \"4F照明系统\",\r\n              fileId: \"10000713242262\",\r\n              children: [],\r\n              viewToken: \"639d2b12718f4bb5acb7fe2300d6882c\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          id: 8,\r\n          label: \"B1新风机房\",\r\n          children: [],\r\n        },\r\n        {\r\n          id: 9,\r\n          label: \"B1空调换热器机房\",\r\n          fileId: \"10000713240692\",\r\n          viewToken: \"7fe940114cd34621b2316f4cf3cf7345\",\r\n          children: [],\r\n        },\r\n        {\r\n          id: 10,\r\n          label: \"B1变电所的低配室\",\r\n          children: [],\r\n          fileId: \"10000713242728\",\r\n          viewToken: \"6adb5902acb14573911f2826ddedcb36\",\r\n        },\r\n        {\r\n          id: 11,\r\n          label: \"B2生活热水机房\",\r\n          children: [],\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  watch: {\r\n    keyword(val) {\r\n      this.$refs.tree.filter(val);\r\n    },\r\n  },\r\n  mounted() {\r\n    let deep = this.getArrayMaxDepth(this.menuData);\r\n    console.log(deep);\r\n  },\r\n  methods: {\r\n    // 关键词过滤tree\r\n    filterNode(value, data) {\r\n      if (!value) return true;\r\n      return data.label.indexOf(value) !== -1;\r\n    },\r\n    // 弹出框关闭\r\n    handleClose() {\r\n      this.dialogVisible = false;\r\n      this.editForm.date = \"\";\r\n      this.editForm.status = \"\";\r\n    },\r\n    // 目标子节点增加\r\n    append(data, name) {\r\n      const h = this.$createElement;\r\n      let deep = this.getArrayMaxDepth(this.menuData);\r\n      if (data.depth >= 2) {\r\n        this.$notify({\r\n          title: \"三维菜单\",\r\n          message: h(\r\n            \"i\",\r\n            { style: \"color: teal\" },\r\n            `三维菜单层级不可超过2,当前最大层数为${deep}`\r\n          ),\r\n        });\r\n        return;\r\n      }\r\n      const newChild = {\r\n        id: data.id ? data.id + Math.random() * 100 : Math.random() * 100,\r\n        label: name,\r\n        children: [],\r\n      };\r\n      if (data.id != undefined) {\r\n        if (!data.children) {\r\n          this.$set(data, \"children\", []);\r\n        }\r\n        data.children.push(newChild);\r\n      } else {\r\n        this.menuData.push(newChild);\r\n      }\r\n    },\r\n    // 目标节点删除\r\n    remove(node, data) {\r\n      const parent = node.parent;\r\n      const children = parent.data.children || parent.data;\r\n      const index = children.findIndex((d) => d.id === data.id);\r\n      children.splice(index, 1);\r\n    },\r\n    handleDragStart(node, ev) {\r\n      // console.log(\"drag start\", node);\r\n    },\r\n    handleDragEnter(draggingNode, dropNode, ev) {\r\n      // console.log(\"tree drag enter: \", dropNode.label);\r\n    },\r\n    handleDragLeave(draggingNode, dropNode, ev) {\r\n      // console.log(\"tree drag leave: \", dropNode.label);\r\n    },\r\n    handleDragOver(draggingNode, dropNode, ev) {\r\n      // console.log(\"tree drag over: \", dropNode.label);\r\n    },\r\n    handleDragEnd(draggingNode, dropNode, dropType, ev) {\r\n      this.getArrayMaxDepth(this.menuData);\r\n    },\r\n    handleDrop(draggingNode, dropNode, dropType, ev) {\r\n      // console.log(\"tree drop: \", dropNode.label, dropType);\r\n    },\r\n    allowDrop(draggingNode, dropNode, type) {\r\n      // 1.选择节点的总深度和被插入节点深度相加不能超过2; 返回true\r\n      // 2.如果选中节点没有子节点，且被插入节点也没有子节点 则返回true\r\n      // 3.选中节点深度超过2且选中节点有子节点 &&  被插入节点深度超过2且有子节点 返回false\r\n      let targetNodeHasChild =\r\n        draggingNode.children == undefined &&\r\n        draggingNode.children?.length;\r\n      let insertedNodeHasChild =\r\n        dropNode.children == undefined && dropNode.children?.length;\r\n      if (\r\n        (targetNodeHasChild && insertedNodeHasChild) ||\r\n        this.singleNodeDepth(dropNode.parent) >= 2 ||\r\n        this.singleNodeDepth(dropNode.data) +\r\n          this.singleNodeDepth(draggingNode.data) >=\r\n          3 ||\r\n        this.singleNodeDepth(draggingNode.data) >= 2 ||\r\n        this.singleNodeDepth(draggingNode.parent) >= 2\r\n      ) {\r\n        if (\r\n          this.singleNodeDepth(dropNode.data) >= 2 &&\r\n          !insertedNodeHasChild &&\r\n          this.singleNodeDepth(draggingNode.data) >= 2 &&\r\n          !targetNodeHasChild\r\n        ) {\r\n          return false;\r\n        }\r\n        return type !== \"inner\";\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    allowDrag(draggingNode) {\r\n      return draggingNode.data.label.indexOf(\"三级 3-2-2\") === -1;\r\n    },\r\n    // 最外部节点增加\r\n    addNew(data) {\r\n      this.emptyForm();\r\n      this.dialogTitle = \"新建\";\r\n      this.dialogVisible = true;\r\n      this.targetItemID = data;\r\n    },\r\n    submitForm() {\r\n      this.$refs[\"editForm\"].validate((valid) => {\r\n        if (valid) {\r\n          if (this.dialogTitle == \"新建\") {\r\n            this.append(this.targetItemID, this.editForm.menuName);\r\n            // add new success submit\r\n          } else {\r\n            this.editFn(this.targetItemID, this.editForm.menuName);\r\n            // edit item\r\n          }\r\n          this.dialogVisible = false;\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 清空editFrom值\r\n    emptyForm() {\r\n      for (let key in this.editForm) {\r\n        this.editForm[key] = \"\";\r\n      }\r\n    },\r\n    // 模拟编辑更新\r\n    editFn(data, name) {\r\n      data.label = name;\r\n    },\r\n    // 弹出编辑框\r\n    editShow(data) {\r\n      this.emptyForm();\r\n      this.dialogTitle = \"编辑\";\r\n      this.dialogVisible = true;\r\n      this.targetItemID = data;\r\n      this.editForm.menuName = data.label;\r\n    },\r\n    deleteFn(id) {\r\n      // delete item\r\n    },\r\n    // 单节点遍历深度\r\n    singleNodeDepth(data) {\r\n      let depth = data.depth;\r\n      function getMaxDepth(data, depth) {\r\n        depth = data.depth;\r\n        console.log(\"depth\", depth);\r\n        if (data.children != undefined && data.children.length > 0) {\r\n          for (let i = 0; i < data.children.length; i++) {\r\n            getMaxDepth(data.children[i], depth);\r\n          }\r\n        } else {\r\n          return depth;\r\n        }\r\n      }\r\n      if (data.children != undefined && data.children.length > 0) {\r\n        for (let i = 0; i < data.children.length; i++) {\r\n          return getMaxDepth(data.children[i], depth);\r\n        }\r\n      } else {\r\n        return depth;\r\n      }\r\n    },\r\n    // 获取 treeData 最大深度\r\n    getArrayMaxDepth(arr) {\r\n      if (!Array.isArray(arr) && !arr.length > 0) return;\r\n      let deepArr = [];\r\n      for (let i = 0; i < arr.length; i++) {\r\n        getDeep(arr[i], 0, deepArr);\r\n      }\r\n      function getDeep(data, i, deepArr) {\r\n        var treeRoot = data.children != undefined && data.children.length > 0;\r\n        if (!treeRoot) {\r\n          i++;\r\n          data.depth = i;\r\n          deepArr.push(i);\r\n          return;\r\n        }\r\n        i++;\r\n        data.depth = i;\r\n        for (let j = 0; j < data.children.length; j++) {\r\n          getDeep(data.children[j], i, deepArr);\r\n        }\r\n      }\r\n      return matchMax(deepArr);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped >\r\n.custom-tree-node {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 14px;\r\n  padding-right: 8px;\r\n}\r\n.opeartionBtn {\r\n  padding: 0 10px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/.pnpm/registry.npmmirror.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.3.0_ocf5rtwbdm3mau6pf6fzkqlwt4/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_xdjepxz3ebzthb3trwr2tgybci/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/.pnpm/registry.npmmirror.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.3.0_ocf5rtwbdm3mau6pf6fzkqlwt4/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_xdjepxz3ebzthb3trwr2tgybci/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=25d6dfee&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=25d6dfee&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_xdjepxz3ebzthb3trwr2tgybci/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25d6dfee\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\n// eslint-disable-next-line es/no-array-prototype-findindex -- testing\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}