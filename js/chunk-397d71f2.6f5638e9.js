(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-397d71f2"],{"2d73":function(e,t,i){"use strict";i("fc75")},"7a91":function(e,t,i){"use strict";var n=i("3c81"),a=i("3688").filter,r=i("6ae3"),l=r("filter");n({target:"Array",proto:!0,forced:!l},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},cab5:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row justify-between my-mb-20"},[i("el-row",{staticClass:"height-full flex-other"},[i("el-col",{staticClass:"row align-middle my-mr-10",attrs:{span:5}},[i("span",{staticClass:"flex-shrink"},[e._v(" 关键字： ")]),i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1),i("div",[i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-search"}),i("span",{staticClass:"my-px-5"},[e._v("搜索")])]),i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-refresh"}),i("span",{staticClass:"my-px-5"},[e._v("重置")])]),i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-download"}),i("span",{staticClass:"my-px-5"},[e._v("导出")])]),i("el-button",{attrs:{type:"success"},on:{click:e.addNew}},[i("i",{staticClass:"el-icon-circle-plus-outline"}),i("span",{staticClass:"my-px-5"},[e._v("添加")])])],1)],1),i("el-divider"),i("el-tree",{ref:"tree",attrs:{data:e.menuData,"node-key":"id","default-expand-all":"","filter-node-method":e.filterNode,draggable:"","allow-drop":e.allowDrop,"allow-drag":e.allowDrag,"expand-on-click-node":!1},on:{"node-drag-start":e.handleDragStart,"node-drag-enter":e.handleDragEnter,"node-drag-leave":e.handleDragLeave,"node-drag-over":e.handleDragOver,"node-drag-end":e.handleDragEnd,"node-drop":e.handleDrop},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[e._v(e._s(n.label))]),i("span",[i("span",{staticClass:"opeartionBtn fc-editColor",on:{click:function(){return e.editShow(a)}}},[e._v(" 修改 ")]),i("el-divider",{attrs:{direction:"vertical"}}),i("span",{staticClass:"opeartionBtn fc-appendColor",on:{click:function(){return e.addNew(a)}}},[e._v(" 新增 ")]),i("el-divider",{attrs:{direction:"vertical"}}),i("span",{staticClass:"opeartionBtn fc-deleteColor",on:{click:function(){return e.remove(n,a)}}},[e._v(" 删除 ")])],1)])}}])}),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[i("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.editForm.menuName,callback:function(t){e.$set(e.editForm,"menuName",t)},expression:"editForm.menuName"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},a=[];i("7a91"),i("e97b"),i("0e17"),i("d7fb"),i("538c"),i("684a");function r(e){var t=e.length,i=e.sort();return i[t-1]}var l={name:"floor",data:function(){return{keyword:"",targetItemID:"",dialogVisible:!1,dialogTitle:"编辑",editForm:{menuName:""},editFormRules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},menuData:[{id:1,label:"RF空调冷热源设备",fileId:"10000713243357",viewToken:"6885ff29b3464f06931c73c68cb0494d",children:[]},{id:2,label:"RF排风热回收型新风机组",children:[]},{id:3,label:"4F办公区域",children:[{id:4,label:"4F建筑模型",children:[],fileId:"10000713242231",viewToken:"4c079ddafe5b46b7922490fffc1792d9"},{id:5,fileId:"10000713237848",children:[],viewToken:"fcf12606ba534c0fb3d8c3be65cabbe3",label:"4F空调系统"},{id:6,label:"4F配电系统",children:[]},{id:7,label:"4F照明系统",fileId:"10000713242262",children:[],viewToken:"639d2b12718f4bb5acb7fe2300d6882c"}]},{id:8,label:"B1新风机房",children:[]},{id:9,label:"B1空调换热器机房",fileId:"10000713240692",viewToken:"7fe940114cd34621b2316f4cf3cf7345",children:[]},{id:10,label:"B1变电所的低配室",children:[],fileId:"10000713242728",viewToken:"6adb5902acb14573911f2826ddedcb36"},{id:11,label:"B2生活热水机房",children:[]}]}},watch:{keyword:function(e){this.$refs.tree.filter(e)}},mounted:function(){var e=this.getArrayMaxDepth(this.menuData);console.log(e)},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleClose:function(){this.dialogVisible=!1,this.editForm.date="",this.editForm.status=""},append:function(e,t){var i=this.$createElement,n=this.getArrayMaxDepth(this.menuData);if(e.depth>=2)this.$notify({title:"三维菜单",message:i("i",{style:"color: teal"},"三维菜单层级不可超过2,当前最大层数为".concat(n))});else{var a={id:e.id?e.id+100*Math.random():100*Math.random(),label:t,children:[]};void 0!=e.id?(e.children||this.$set(e,"children",[]),e.children.push(a)):this.menuData.push(a)}},remove:function(e,t){var i=e.parent,n=i.data.children||i.data,a=n.findIndex((function(e){return e.id===t.id}));n.splice(a,1)},handleDragStart:function(e,t){},handleDragEnter:function(e,t,i){},handleDragLeave:function(e,t,i){},handleDragOver:function(e,t,i){},handleDragEnd:function(e,t,i,n){this.getArrayMaxDepth(this.menuData)},handleDrop:function(e,t,i,n){},allowDrop:function(e,t,i){var n,a,r=void 0==e.children&&(null===(n=e.children)||void 0===n?void 0:n.length),l=void 0==t.children&&(null===(a=t.children)||void 0===a?void 0:a.length);return!(r&&l||this.singleNodeDepth(t.parent)>=2||this.singleNodeDepth(t.data)+this.singleNodeDepth(e.data)>=3||this.singleNodeDepth(e.data)>=2||this.singleNodeDepth(e.parent)>=2)||!(this.singleNodeDepth(t.data)>=2&&!l&&this.singleNodeDepth(e.data)>=2&&!r)&&"inner"!==i},allowDrag:function(e){return-1===e.data.label.indexOf("三级 3-2-2")},addNew:function(e){this.emptyForm(),this.dialogTitle="新建",this.dialogVisible=!0,this.targetItemID=e},submitForm:function(){var e=this;this.$refs["editForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;"新建"==e.dialogTitle?e.append(e.targetItemID,e.editForm.menuName):e.editFn(e.targetItemID,e.editForm.menuName),e.dialogVisible=!1}))},emptyForm:function(){for(var e in this.editForm)this.editForm[e]=""},editFn:function(e,t){e.label=t},editShow:function(e){this.emptyForm(),this.dialogTitle="编辑",this.dialogVisible=!0,this.targetItemID=e,this.editForm.menuName=e.label},deleteFn:function(e){},singleNodeDepth:function(e){var t=e.depth;function i(e,t){if(t=e.depth,console.log("depth",t),!(void 0!=e.children&&e.children.length>0))return t;for(var n=0;n<e.children.length;n++)i(e.children[n],t)}if(!(void 0!=e.children&&e.children.length>0))return t;for(var n=0;n<e.children.length;n++)return i(e.children[n],t)},getArrayMaxDepth:function(e){if(Array.isArray(e)||!(!e.length>0)){for(var t=[],i=0;i<e.length;i++)n(e[i],0,t);return r(t)}function n(e,t,i){var a=void 0!=e.children&&e.children.length>0;if(!a)return t++,e.depth=t,void i.push(t);t++,e.depth=t;for(var r=0;r<e.children.length;r++)n(e.children[r],t,i)}}}},d=l,o=(i("2d73"),i("f094")),s=Object(o["a"])(d,n,a,!1,null,"25d6dfee",null);t["default"]=s.exports},d7fb:function(e,t,i){"use strict";var n=i("3c81"),a=i("3688").findIndex,r=i("a6b1"),l="findIndex",d=!0;l in[]&&Array(1)[l]((function(){d=!1})),n({target:"Array",proto:!0,forced:d},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(l)},fc75:function(e,t,i){}}]);
//# sourceMappingURL=chunk-397d71f2.6f5638e9.js.map